--- # Testing
- hosts: idrac
  connection: ssh
  user: root
  sudo: yes
  gather_facts: no
  vars_prompt:
    - name: option
      prompt: Do you want to generate new certificate signing request (0) or display current status of CSR operation (1)?
      private: no
      default:1
  tasks:
    - name: sslcsrgen -- generate a certificate CSR from the RAC
      raw: racadm sslcsrgen {{ '-s' if option|bool else '-g' }}
      register: sslcsrgen
    - debug: var=sslcsrgen
    - name: getractime -- display the current RAC time 
      raw: racadm getractime -d
      register: ractime
    - debug: var=ractime
    - local_action: copy content={{ sslcsrgen.stdout_lines }} dest=/root/ansible-idrac/auto-idrac/output/sslcsrgen/{{ inventory_hostname }}-sslcsrgen-{{ item }}.txt
      with_items: "{{ ractime.stdout_lines }}"
